<?xml version="1.0" encoding="UTF-8"?>
<data>
  <tilesheet id="med_mech.png" width="48" height="32"/>
  <tile id="med_mech" sheet="med_mech.png"/>

  <animation id="med_mech.move" x="1" count="14"/>
  <animation id="med_mech.cannons" x="15" count="8"/>

  <vehicle id="med_mech" tile="med_mech" health="1000" speed="4" defense="10" fuel="1000" efficiency="0" type="" fps="10" icon="exo_mech.ico" title="item.names.med_mech" blood="science.explosion.med" max_weight="3000" hitDamage="2" death_sfx="explosion" item="med_mech">
    <listItem title="vehicle.pack_up">
      <closeWindows /><action>this.dismount();</action>
      <invokeLater><section if="player.vehicle == null">
        <action>player.inventory.addAll(this.inventory);</action><remove object="this" />
        <item id="med_mech" value="this.health"><parameter id="l" value="this.equipment.getItemId('attack')" /><parameter id="p" value="this.equipment.getItemId('tech')" /><parameter id="f" value="Std.string(this.fuel)" /></item>
      </section></invokeLater>
    </listItem>
    <init><set id="partial" value="0" /></init>
    <onFrame>
      if(core) this.addFuel(1);
    </onFrame>
    <repair id="chrome_plating" value="500" />
    <fuel id="tritium" fuel="1000" />
    <slot id="attack"/><slot id="tech" noneItem="power_core"/>
    <light tile="light.medium" color="6cd3f0" flicker="true" />
    <mount><action>setGameScale(2);</action><set id="core" value="this.equipment.get('tech').value != null" /></mount>
    <dismount><action>setGameScale(1)</action></dismount>
    <!-- <attack type="cannons">
      Endergy blasts
      Fast repeat, moderate damage, low power usage
    </attack> -->

    <!-- <attack type="projectile" useDefend="true" attack="10" range="10" animation="cannons" cost="10" scaleCost="false" sfx="plasma_gun">
      <projectile tile="fighter.gun.bolt" animation="fighter.gun.bolt" speed="16" offsetX="-80" offsetY="0" delay="1" overlap="0.25" />
      <projectile tile="fighter.gun.bolt" animation="fighter.gun.bolt" speed="16" offsetX="-70" offsetY="12" delay="1" overlap="0.25" />
    </attack> -->

    <!-- <ability hotkey="8">
      Massive AOE EMP pulse, hotkey 8
      Very slow recharge, Moderate(area) damage, uses all remaining power
    </ability> -->
  </vehicle>

  <item id="med_mech" type="object" cost="0" weight="100" icon="exo_mech.ico" durability="1000" durabilityName="common.health" durabilityIcon="vehicle_health">
    <action id="plant" name="vehicle.deploy" object="med_mech" onGrass="false" overlapBlueprints="true" overlapStructures="true" removeBushes="false" on_air="true" underground="true">
			<action>
				object.setHealth(this.getFeed()); p = Item.getParameter(this.getNameStr(), "l"); d = Item.getParameter(this.getNameStr(), "p");
				f = Item.getParameter(this.getNameStr(), "f"); if(f != null) object.setFuel(Std.parseInt(f));
			</action>
			<equip eval="p" to="object" fromInventory="false" if="p != null" /><equip eval="d" to="object" fromInventory="false" if="d != null" />
		</action>
    <action id="feed" alt="feed_all" alt_name="repair_all" name="repair" full="warning.max_repair" auto="common.auto_repair" select="actions.repair" sfx="workshop" />
    <food id="chrome_plating" value="500" />
  </item>

  <tile id="med_mech.rockets" sheet="med_mech.png" x="23"/>
  <animation id="equipment.med_mech.rockets.move" x="1" count="14"/>
  <animation id="equipment.med_mech.rockets" x="15" count="4"/>
  <item id="med_mech.rockets" type="equipment" slot="attack" equipOn="med_mech" cost="10000" weight="40" range="30" power="10" icon="fighter.launcher.ico" projectile="missile" group="rocket_launcher" offsetY="-12" offsetX="15">
    <action id="setProjectile" />
  </item>

</data>
